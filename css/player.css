.device-card{display:flex;align-items:center;gap:12px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;padding:8px;margin-bottom:8px;cursor:grab;min-height:56px;flex-wrap:wrap}
.device-card:focus-visible{outline:2px solid #2563eb;outline-offset:2px}
.device-card__icon{width:48px;height:48px;flex:0 0 48px;border-radius:6px;object-fit:contain;background:#e2e8f0}
.device-card__icon--missing{display:none}
.device-card__label{flex:1 1 160px;min-width:0;font-weight:500;color:#1f2937;line-height:1.3}
.stage .bg{display:block;width:100%;height:auto}
.stage .anchor-layer{position:absolute;inset:0;pointer-events:none}
.stage .anchor-layer .anchor-hit{pointer-events:auto}
.stage .anchor-badge-layer{position:absolute;inset:0;pointer-events:none;z-index:30}
.stage .anchor-badge-layer .anchor-hit__placements{position:absolute}
.anchor-hit{position:absolute;width:20px;height:20px;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;pointer-events:auto;border-radius:9999px;animation:anchorPulse 2.4s ease-in-out infinite;--anchor-label-shift-x:0px;--anchor-label-shift-y:0px}
.anchor-hit__dot{position:relative;display:block;width:16px;height:16px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#bae6fd 0,#38bdf8 55%,#0284c7 100%);border:2px solid rgba(248,250,252,.95);box-shadow:0 0 0 2px rgba(15,23,42,.4),0 0 10px rgba(56,189,248,.7);opacity:.95}
.anchor-hit--allowed .anchor-hit__dot{box-shadow:0 0 0 2px rgba(56,189,248,.9),0 0 14px rgba(59,130,246,.8);transform:scale(1.05)}
.anchor-hit--blocked{animation:none}
.anchor-hit--blocked .anchor-hit__dot{background:radial-gradient(circle at 30% 30%,#fecaca 0,#f87171 55%,#dc2626 100%);box-shadow:0 0 0 2px rgba(248,113,113,.8),0 0 12px rgba(248,113,113,.6)}
.anchor-hit__label{position:absolute;top:calc(100% + 6px);left:50%;transform:translate(calc(-50% + var(--anchor-label-shift-x,0px)),var(--anchor-label-shift-y,0px));white-space:nowrap;font-size:12px;line-height:1.2;font-weight:600;color:#f8fafc;background:rgba(15,23,42,.85);border:1px solid rgba(148,163,184,.7);border-radius:9999px;padding:2px 8px;box-shadow:0 2px 6px rgba(15,23,42,.35);pointer-events:none;text-transform:none;letter-spacing:.01em;max-width:180px;overflow:hidden;text-overflow:ellipsis}
.anchor-hit--label-top .anchor-hit__label{top:auto;bottom:calc(100% + 6px)}
.anchor-hit:focus-visible{outline:2px solid #fbbf24;outline-offset:4px}
@media (prefers-reduced-motion: reduce){.anchor-hit{animation:none}}
.anchor-hit__dot::after{content:"";position:absolute;inset:-6px;border-radius:inherit;box-shadow:0 0 0 2px rgba(255,255,255,.45);pointer-events:none}
.anchor-hit__placements{position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;z-index:10}
.anchor-hit__badge{position:absolute;transform:translate(-50%,-50%) translate(var(--badge-offset-x,0px),var(--badge-offset-y,0px));pointer-events:auto;cursor:pointer;width:64px;height:64px;display:flex;align-items:center;justify-content:center;padding:0;border:none;background:transparent;border-radius:18px;box-sizing:border-box;overflow:hidden}
.anchor-hit__badge.anchor-hit__badge-card{background:rgba(241,245,249,.96);border:1px solid rgba(15,23,42,.18);box-shadow:0 10px 24px rgba(15,23,42,.18),0 4px 10px rgba(15,23,42,.12);padding:8px}
.anchor-hit__badge:focus-visible{outline:2px solid #2563eb;outline-offset:4px}
.anchor-hit__badge-icon{width:40px;height:40px;max-width:100%;max-height:100%;display:block;object-fit:contain;flex-shrink:0}
.anchor-hit__badge--fallback{background:linear-gradient(180deg,rgba(226,232,240,.9),rgba(203,213,225,.9));color:#0f172a}
.anchor-hit__badge-fallback{display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:600;line-height:1;color:#0f172a;white-space:nowrap;padding:0 4px;border-radius:6px}
@keyframes anchorPulse{0%,100%{transform:translate(-50%,-50%) scale(1);opacity:1}50%{transform:translate(-50%,-50%) scale(1.12);opacity:.85}}
.placed{border-color:#0ea5e9;background:rgba(224,242,254,.95);box-shadow:0 10px 26px rgba(14,165,233,.28),0 4px 12px rgba(14,165,233,.18);color:#0f172a;font-weight:600}
.anim-success{animation:flash 1.2s ease}
.anim-fail{animation:shake .4s ease}
@keyframes flash{0%{background:rgba(250,204,21,.1)}50%{background:rgba(250,204,21,.6)}100%{background:transparent}}
@keyframes shake{0%{transform:translate(-50%,-50%) translateX(0)}25%{transform:translate(-50%,-50%) translateX(-6px)}50%{transform:translate(-50%,-50%) translateX(6px)}100%{transform:translate(-50%,-50%) translateX(0)}}
